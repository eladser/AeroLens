<!DOCTYPE html>
<html>
<head>
  <title>AeroLens - adsb.lol Coverage Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body { margin: 0; font-family: system-ui; background: #0f172a; }
    #map { height: 100vh; width: 100vw; }
    .legend {
      position: fixed; bottom: 20px; right: 20px; background: rgba(30,41,59,0.95);
      padding: 16px 20px; border-radius: 10px; color: #f8fafc; font-size: 13px;
      border: 1px solid rgba(148,163,184,0.1); z-index: 1000;
    }
    .legend div { margin: 4px 0; }
    .legend span { display: inline-block; width: 12px; height: 12px; border-radius: 50%; margin-right: 8px; vertical-align: middle; }
  </style>
</head>
<body>
  <div id="map"></div>
  <div class="legend">
    <div style="font-weight:600; margin-bottom:8px;">adsb.lol Coverage (1 query @ 11,000nm)</div>
    <div><span style="background:rgba(14,165,233,0.3);border:2px solid #0ea5e9;"></span> 11,000nm radius (full globe)</div>
    <div><span style="background:#ef4444;"></span> Query center point (0,0)</div>
    <div style="margin-top:8px; color:#64748b;" id="info"></div>
  </div>
  <script>
    const map = L.map('map', { zoomControl: false }).setView([20, 30], 2);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; CartoDB', maxZoom: 19
    }).addTo(map);

    const NM_TO_METERS = 1852;

    // Single query at 11,000nm from (0,0) covers the entire globe
    L.circle([0, 0], {
      radius: 11000 * NM_TO_METERS,
      color: '#0ea5e9',
      weight: 1.5,
      fillColor: '#0ea5e9',
      fillOpacity: 0.06,
      dashArray: '4 4',
    }).addTo(map).bindTooltip('Global query (11,000nm)', { permanent: false, direction: 'top' });

    L.circleMarker([0, 0], {
      radius: 5,
      color: '#ef4444',
      fillColor: '#ef4444',
      fillOpacity: 1,
      weight: 0,
    }).addTo(map);

    document.getElementById('info').textContent = '1 query, 11,000nm radius, ~4,600 aircraft';
  </script>
</body>
</html>
